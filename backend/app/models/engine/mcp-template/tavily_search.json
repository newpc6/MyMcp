{
  "name": "tavily_search",
  "description": "使用Tavily API进行实时在线搜索",
  "module_path": "repository.tavily_search",
  "author": "系统",
  "version": "1.0.0",
  "tags": "搜索,Tavily,实时搜索,网络搜索",
  "icon": "search",
  "is_hosted": true,
  "category": "搜索工具",
  "config_schema": "{\n    \"api_key\": {\n        \"type\": \"string\",\n        \"description\": \"Tavily API密钥\",\n        \"required\": true\n    }\n}",
  "code": "\"\"\"\nTavily搜索助手，提供实时在线搜索功能\n\"\"\"\nfrom tavily import TavilyClient\nimport json\nimport codecs\n\ndef online_search(query):\n    \"\"\"\n    使用tavily实时在线搜索\n\n    参数:\n    query (str): 要搜索的查询字符串。\n\n    返回:\n    list: 包含搜索结果的字典列表。如果没有结果，则返回 None。\n    \"\"\"\n    tavily_client = TavilyClient(${api_key})\n    response = tavily_client.search(query)\n    \n    if response.get(\"results\"):\n        # 处理搜索结果，解码Unicode转义序列\n        results = []\n        for item in response.get(\"results\"):\n            # 如果结果已经是字典格式直接使用\n            if isinstance(item, dict):\n                # 处理字典中的Unicode转义序列\n                processed_item = decode_unicode_in_dict(item)\n                results.append(processed_item)\n            # 如果结果是JSON字符串需要解析\n            else:\n                try:\n                    item_dict = json.loads(item)\n                    processed_item = decode_unicode_in_dict(item_dict)\n                    results.append(processed_item)\n                except json.JSONDecodeError:\n                    results.append({\"content\": item})\n        \n        return json.dumps(results, ensure_ascii=False, indent=2)\n    else:\n        return None\n\ndef decode_unicode_in_dict(data):\n    \"\"\"\n    递归解码字典中的Unicode转义序列\n    \"\"\"\n    if isinstance(data, dict):\n        return {key: decode_unicode_in_dict(value) for key, value in data.items()}\n    elif isinstance(data, list):\n        return [decode_unicode_in_dict(item) for item in data]\n    elif isinstance(data, str):\n        try:\n            # 解码Unicode转义序列\n            return codecs.decode(data, 'unicode_escape')\n        except (UnicodeDecodeError, UnicodeError):\n            # 如果解码失败，返回原字符串\n            return data\n    else:\n        return data",
  "markdown_docs": "# Tavily搜索助手\n\n## 简介\nTavily搜索助手利用Tavily API提供实时在线搜索功能，可以获取最新的互联网内容。搜索结果会自动解码Unicode转义序列，确保中文内容正确显示。\n\n## 配置项\n该模块需要以下配置：\n\n| 配置项 | 类型 | 描述 | 默认值 |\n|-------|-----|------|-------|\n| api_key | 字符串 | Tavily API密钥 | 必填 |\n\n## 功能列表\n\n### 在线搜索\n根据查询词在互联网上实时搜索内容，返回相关结果。\n\n**参数：**\n- query: 搜索查询词\n\n**返回：**\n- 包含搜索结果的JSON字符串，每个结果包含内容和元数据\n- 自动解码Unicode转义序列，确保中文正确显示\n- 如果没有结果，则返回None\n\n## 使用示例\n```python\n# 搜索\"武汉天气\"\nresults = online_search(\"武汉天气\")\n# 返回解码后的中文搜索结果\n```\n\n## 注意事项\n1. 使用前需要在平台配置有效的Tavily API密钥\n2. 需要安装tavily-python库\n3. 结果内容可能包含HTML标记，根据需要进行处理\n4. 自动处理Unicode转义序列，确保中文内容正确显示"
}